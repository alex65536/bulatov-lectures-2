# Конспект по математическому анализу в LaTeX (по лекциям Булатова)

[![Build Status](https://travis-ci.com/alex65536/bulatov-lectures-2.svg?token=jpeNqaJZZxa4oU5dqJk8&branch=master)](https://travis-ci.com/alex65536/bulatov-lectures-2)

В этом репозитории будет вестись работа над конспектом.

## Порядок работы

Работа будет вестись по очереди. Если очередь пуста (надеюсь, такого не
произойдет), то следующий будет выбираться случайно.

[Ссылка на очередь верстки](https://github.com/alex65536/bulatov-lectures-2/projects/1)

Также необходимо, чтобы после добавления лекции кто-то еще
пересматривал изменения и вносил исправления. О том, как проверять лекции, см.
[раздел ниже](#как-проверять-лекции).

## Скачать PDF

PDF регулярно собирается на сервере, из последнего коммита в ветке `master`.
Для скачивания можно использовать
[эту ссылку](https://github.com/alex65536/bulatov-lectures-2/releases/download/latest/bulatov2.pdf).

Между коммитом и сборкой новой PDFки по нему может пройти около пяти минут.
В случае, если сборка свалится, PDFка не обновится.

## Как добавить лекцию

* Создаем новую ветку в git'е.

* Создаем новый файл `tex/chapterX/lecY.tex`, где X &mdash; номер главы,
а Y &mdash; номер лекции.

* Если в лекции Булатов закончил одну главу и начал новую, то создаем два файла.
При этом, если понадобилось создать новую главу, см.
[раздел ниже](#как-создать-главу).

* В созданный файл копируем содержимое шаблона (находится в
`tex/template.tex`).

* Пишем TeXст :)

* Если нужны картинки, то они помещаются в папку `img`.

* Затем необходимо зайти в файл `tex/chapterX.tex` и подключить новый файл,
добавив строчку

  ```tex
  \subfile{tex/chapterX/lecY.tex}
  ```
  
  (здесь и выше вместо X подставляем номер главы, а вместо Y &mdash; номер лекции)

* Создаем pull-request на гитхабе

* Готово :)

## Как создать главу

* Копируем, например, `tex/chapter1.tex` в `tex/chapterX.tex`, где X &mdash;
номер главы

* Удаляем старые ссылки

* Подключаем новую главу в основном файле, добавив строчку

  ```tex
  \subfile{tex/chapterX.tex}
  ```
  
  в `main.tex`.
  
* Готово :)

## Как добавлять картинки

* Допишите в шапку файла
  
  ```tex
  \graphicspath{
    {../../img/}
    {../img/}
    {img/}
  }
  ```
* Затем добавьте картинку в папку `img`. Пусть она называется `42.png`.

* Затем используйте `\includegraphics`:

  ```tex
  \includegraphics{42.png}
  ```
  
* Готово :)

## Как проверять лекции

* Самое главное: проверить, что с формулах и доказательствах теорем нет ошибок.
Если ошибки есть, стоит подумать и исправить. В случае, когда непонятно, как
исправлять и что имелось в виду, лучше обратиться в чат за помощью.

* Также важно, чтобы теоремы, примеры и т. п. были оформлены стандартным способом
с использованием `matanhelper`'а (через `\begin{thm}`, `\begin{exmp}`, ...)

* Можно также убедиться, что глава действительно будет присутствовать в общей PDFке.
Для этого можно либо попробовать собрать PDFку, либо проверить, что в главе есть
ссылка на нужную лекцию, а в `main.tex` &mdash; ссылка на нужную главу.

* Далее, следует взлянуть на раздел [Code-style](#code-style) и посмотреть, не
нарушается ли он. Довольно большая часть стиля проверяются автоматически скриптами
при сборке, но некоторые части трудно поддаются автоматической проверке. В случае
нарушения стоит написать тому человеку, который верстал лекцию, либо исправить самому.

* Можно также проверить на орфографические ошибки, но это не обязательно. @alex65536
будет периодически прогонять тексты через программу проверки орфографии, поэтому здесь
проблем быть не должно.

## Code-style

Хотя чёткого и строгого code-style, как в случае с программированием, нет,
настоятельно рекомендуется придерживаться следующих правил:

0) Самое главное правило &mdash; желательно, чтобы получаемый PDF был оформлен примерно
в одном стиле. Похожие вещи должны выглядеть похоже. При этом одинаковый стиль для кода
не важен. В случае сомнений, как оформить какой-либо участок кода, лучше посмотреть на
предыдущие лекции. Заглянуть в
[тестовый раздел](https://github.com/alex65536/bulatov-lectures-2/blob/master/tex/chapter_test/lec0.tex)
также полезно.

1) При создании скобок используйте специально предназначенные для этого 
конструкции вида `\left(... \right)`, `\left[... \right]` и так далее,
а не просто `(...)`, `[...]`. При этом, обычные скобки нужно использовать в том случае,
когда внутри скобок находятся небольшие выражения, высота которых равна высоте
текста (например, `x`, `f(3,4)`, `5x + 2y + 7`).

2) Не забывайте ставить пробелы внутри выражения, если это требуется. Например:
  - после запятых, разделяющих части формул:
    ```tex
    $f(x_{ij}) = g(x_{ij}),\  \forall i \in \overline{1,n},\ \forall j \in \overline{1,m}$
    ```  
    Обратите внимание на `\` в примере!
  - в интегралах перед `dx`, `dy` и т. д. стоит ставить `\`
  - в выражениях вида `\forall ... \exists ...` пробелы ставится `\quad`:
    ```tex
    \forall ... \quad \exists ...
    ```
  - в остальных случаях применяется правило 0)

Короткий гайд по пробелам в LaTeX:

- по возрастанию ширины: `\!` (отрицательной длины), `\,`, `\:`, `\;`, `\ `, `\quad`, `\qquad`
- больше пробелов: [link](https://tex.stackexchange.com/questions/74353/what-commands-are-there-for-horizontal-spacing/74354#74354)

3) Для многострочных формул следует использовать `\begin{gathered}`:
   ```tex
   \[\begin{gathered}
   первая строка формулы \\
   вторая строка формулы
   \end{gathered}\]
   ```
   `\\` обозначает переход на новую строку.

4) Только что введенные понятия выделяйте _курсивом_, для этого используйте `\emph{}`.
   
Многие правила проверяются автоматически при сборке или при вызове `make style`. Например:
- Следите за длиной строк: в случае, когда они слишком объемные, изучать
изменения не очень комфортно. Требуемая длина строки - не более 80 символов.
- Необходимо использовать конструкцию `\[ \]` вместо `$$ $$`.
- Не стоит использовать `\textit`, лучше использовать `\emph`.
- Вместо `\Rightarrow` и `\Leftrightarrow` используйте `\implies` и `\iff`.
- Пишите "и т.д.", "т.к.", "и т.п.", "т.е." таким образом: `т.~е.`  

Существует также `autofix.sh`, который исправляет код в случае несоблюдения некоторых правил.

## Коммиты

Для изменений стоит создавать свою ветку, а потом сливать их в `master`.
В одной ветке лучше работать над одним изменением
(например, добавление новой главы)
Мелкие исправления можно и сразу в `master` коммитить.

## Continuous Integration

В этом репозитории настроен Travis CI, который собирает конспект на сервере.
Следите за статусом сборки. Для этого можно щелкнуть на текст
`<число коммитов> commits`. Появится список всех коммитов. Около каждого коммита
можно посмотреть статус сборки (очевидно, галочка обозначает "все хорошо", а
крестик &mdash; что не удалось скомпилить, либо не пройдены code-style проверки)

## Ресурсы по LaTeX

* https://en.wikibooks.org/wiki/LaTeX/

## Этот README

Это описание можно менять, если с чем-то не согласны (лучше после обсуждения).
Дополнения и решение общих проблем также можно писать сюда.

## В случае каких-либо проблем (с компиляцией, с добавлением файлов)

Можно попробовать разобраться, если не получилось,
писать мне (@alex65536) или в чат.
