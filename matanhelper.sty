\ProvidesPackage{matanhelper}

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{mathtools}
\usepackage{textcomp}
\usepackage{tikz}

\usetikzlibrary{calc}
\usetikzlibrary{arrows.meta}

% Теоремы, следствия, замечания, ...
\theoremstyle{plain}
\newtheorem{theorem}{Теорема}[chapter]
\newtheorem{lemma}[theorem]{Лемма}
\newcounter{corollaryCounter}[theorem]
\newtheorem{corollary}[corollaryCounter]{Следствие}
\newtheorem*{corollary*}{Следствие}

\theoremstyle{definition}
\newtheorem*{example}{Пример}
\newtheorem*{examples}{Примеры}
\newtheorem*{iexample}{Важный пример}
\newtheorem*{exercise}{Упражнение}
\newtheorem{definition}{Определение}[chapter]

\theoremstyle{remark}
\newtheorem*{remark}{Замечание}
\newtheorem*{editremark}{Замечание (от редакторов конспекта)}
\newtheorem*{remarks}{Замечания}
\newtheorem*{exerciseAnswer}{Ответ на упражнение}

% Сокращения (aliases)
\let \thm \theorem
\let \lem \lemma
\let \defn \definition
\let \exmp \example
\let \iex \iexample
\let \exmps \examples
\let \exc \exercise
\let \rem \remark
\let \erem \editremark
\let \rems \remarks
\let \crl \corollary
\let \eans \exerciseAnswer

% Нумеровать формулы по главам
\numberwithin{equation}{chapter}

% Версия со звездочкой убирает нумерацию из следствия
\newenvironment{crl*}{\begin{corollary*}}{\end{corollary*}}

% Разные определения
\newcommand{\eps}{\varepsilon}
\renewcommand{\phi}{\varphi}
\newcommand{\abs}[1]{\left|{#1}\right|}
\newcommand{\norm}[1]{\lVert{#1}\rVert}
\newcommand{\stk}[2]{\stackrel{\eqref{#1}}{#2}}
\newcommand{\D}{\Delta}
\newcommand{\pderiv}[2]{\frac{\partial #1}{\partial #2}}
\newcommand{\appr}[1]{\xrightarrow[#1]{}}
\newcommand{\scal}[1]{\left\langle #1 \right\rangle}
\newcommand{\F}{\mathcal{F}}

% Дуги и стрелки над обозначениями кривых
\newcommand{\overbow@any}[2]{
   \tikz [baseline = (N.base), every node/.style={}] {
      \node [inner sep = 0pt] (N) {$#1$};
      \draw [line width = 0.4pt, #2] plot [smooth, tension=1.3] coordinates {
         ($(N.north west) + (0.1ex,0)$)
         ($(N.north)      + (0,0.5ex)$)
         ($(N.north east) + (0,0)$)
      };
   }
}
\newcommand{\overbow}[1]{\overbow@any{#1}{-}}
\newcommand{\overbowleft}[1]{\overbow@any{#1}{{latex[length=3mm]}-}}
\newcommand{\overbowright}[1]{\overbow@any{#1}{-{latex[length=3mm]}}}

% Числовые множества
\newcommand{\R}{\mathbb{R}}
\renewcommand{\C}{\mathbb{C}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}

% Специальная команда обрамления в кружочек
\newcommand*{\encircle}[1]{%
  \relax%
  \ifmmode%
    \mathpalette\@encircle@math{#1}%
  \else%
    \@encircle{#1}%
  \fi%
}
\newcommand*{\@encircle@math}[2]{%
  \@encircle{$\m@th#1#2$}%
}
\newcommand*{\@encircle}[1]{%
  \tikz[baseline,anchor=base] {%
    \node[draw,circle,outer sep=0pt,inner sep=.1ex] {#1};%
  }%
}

% Необходимость, достаточность
\newcommand{\nec}{\encircle{$\Rightarrow$}}
\newcommand{\suff}{\encircle{$\Leftarrow$}}

% Лопиталь
\newcommand{\lopital}{\encircle{\text{Л}}}

% Наклонные \le и \ge
\renewcommand{\le}{\leqslant}
\renewcommand{\ge}{\geqslant}
\renewcommand{\leq}{\leqslant}
\renewcommand{\geq}{\geqslant}

% Буквенные \Re и \Im
\DeclareMathOperator{\@custom@Re}{Re}
\DeclareMathOperator{\@custom@Im}{Im}
\renewcommand{\Re}{\@custom@Re}
\renewcommand{\Im}{\@custom@Im}

% Еще переопределения
\renewcommand{\emptyset}{\varnothing}

% Математические операторы
\DeclareMathOperator{\rank}{rank}
\DeclareMathOperator{\mes}{mes}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\fix}{fix}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\sign}{sgn}
\DeclareMathOperator{\vp}{v.p.}
\DeclareMathOperator{\Arg}{Arg}
\DeclareMathOperator{\Ln}{Ln}
\DeclareMathOperator{\Arcsin}{Arcsin}
\DeclareMathOperator{\Arccos}{Arccos}
\DeclareMathOperator{\Arctg}{Arctg}
\DeclareMathOperator{\Arcctg}{Arcctg}
\DeclareMathOperator{\Arsh}{Arsh}
\DeclareMathOperator{\Arch}{Arch}
\DeclareMathOperator{\Arth}{Arth}
\DeclareMathOperator{\Arcth}{Arcth}
\DeclareMathOperator{\res}{res}

% arctan -> arctg
\renewcommand{\arctan}{\arctg}

% Интегралы до бесконечности
\newcommand{\iinf}[1]{\int\limits_{#1}^{+\infty}}
\newcommand{\ioinf}{\int\limits_{0}^{+\infty}}
\newcommand{\ipminf}{\int\limits_{-\infty}^{+\infty}}
